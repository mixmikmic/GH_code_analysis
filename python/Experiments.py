get_ipython().run_cell_magic('capture', '', "\n%matplotlib inline\nimport matplotlib.pyplot as plt\nimport numpy as np\n\nfrom code.probability import Multinomial\ntable = np.zeros((6,2,2))\ntable[0,0] = [825*.62,825*.38]\ntable[0,1] = [108*.82,108*.18]\ntable[1,0] = [560*.63,560*.37]\ntable[1,1] = [25*.68,25*.32]\ntable[2,0] = [325*.37,325*.63]\ntable[2,1] = [593*.34,593*.66]\ntable[3,0]= [417*.33,417*.67]\ntable[3,1]= [375*.35,375*.65]\ntable[4,0] = [191*.28,191*.72]\ntable[4,1] = [393*.24,393*.76]\ntable[5,0] = [373*.06,373*.94]\ntable[5,1] = [341*.07,341*.93]\n\nUCB = Multinomial(table,\n                  labels=[['A','B','C','D','E','F'],\n                          ['Male','Female'],\n                          ['Accept', 'Deny']])\n\nUCB_female = UCB.condition_margin(1, 'Female')\n\nUCB_male = UCB.condition_margin(1, 'Male')\nUCB_male.sample(10000)\nmale = np.squeeze(UCB_male.prob)\nUCB_female.sample(1000)\nfemale = np.squeeze(UCB_female.prob)\nmale_major = np.sum(male, 1)\nfemale_major = np.sum(female, 1)\n\nmajor_fig = plt.figure(figsize=(10,10))\nmajor_ax = major_fig.gca()\nmajor_ax.bar(range(female_major.shape[0]), 100 * female_major, alpha=0.5, facecolor='blue', label='Female')\nmajor_ax.bar(range(male_major.shape[0]), 100 * male_major, alpha=0.5, facecolor='yellow', label='Male')\nmajor_ax.legend()\nmajor_ax.set_xticklabels(['A','B','C','D','E','F'])\nmajor_ax.set_xlabel('Major', fontsize=20)\nmajor_ax.set_ylabel('Percentage', fontsize=20)\nmajor_ax.set_title('Breakdown of Major by Gender', fontsize=20)\n\noverall_rate = table.sum(1)\naccept_rate = overall_rate[:,0] / overall_rate.sum(1)\n\naccept_fig = plt.figure(figsize=(10,10))\naccept_ax = accept_fig.gca()\naccept_ax.bar(range(accept_rate.shape[0]), 100 * accept_rate, alpha=0.5, facecolor='red', label='Acceptance')\naccept_ax.set_xticklabels(['A','B','C','D','E','F'])\naccept_ax.set_xlabel('Major', fontsize=20)\naccept_ax.set_ylabel('Percentage', fontsize=20)\naccept_ax.set_title('Acceptance Rate by Major', fontsize=20)\n\n")

major_fig

accept_fig

